<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Summarize a Mixed Model • mixedup</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Summarize a Mixed Model">
<meta property="og:description" content="mixedup">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mixedup</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/variance_components.html">Variance Components</a>
    </li>
    <li>
      <a href="../articles/random_effects.html">Random Effects</a>
    </li>
    <li>
      <a href="../articles/fixed_effects.html">Fixed Effects</a>
    </li>
    <li>
      <a href="../articles/random_coefficients.html">Random Coefficients</a>
    </li>
    <li>
      <a href="../articles/summarize_model.html">Summarize Model</a>
    </li>
    <li>
      <a href="../articles/misc.html">Miscellaneous</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/m-clark">
    <span class="fa fa-github-alt"></span>
     
  </a>
</li>
<li>
  <a href="https://m-clark.github.io">
    <span class="fa fa-empire"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Summarize a Mixed Model</h1>
                        <h4 class="author">Michael Clark</h4>
            
            <h4 class="date"><span style="font-style:normal;font-family:'Open Sans'">2020-06-15</span></h4>
      
      <small class="dont-index">Source: <a href="https://github.com/m-clark/mixedup/blob/master/vignettes/summarize_model.Rmd"><code>vignettes/summarize_model.Rmd</code></a></small>
      <div class="hidden name"><code>summarize_model.Rmd</code></div>

    </div>

    
    
<div id="intro" class="section level2">
<h2 class="hasAnchor">
<a href="#intro" class="anchor"></a>Intro</h2>
<p>This is pretty printing of results of a mixed model. Correlations of random and fixed effects are turned off by default, as the focus of interest is usually the variance components and fixed effects themselves. 95% confidence intervals are provided by default.</p>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">lme4</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">glmmTMB</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">nlme</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">brms</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">mgcv</span>)


<span class="no">lmer_model</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/lme4/man/lmer.html">lmer</a></span>(<span class="no">Reaction</span> ~ <span class="no">Days</span> + (<span class="fl">1</span> + <span class="no">Days</span> <span class="kw">|</span> <span class="no">Subject</span>), <span class="kw">data</span> <span class="kw">=</span> <span class="no">sleepstudy</span>)

<span class="no">lme_model</span>  <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/nlme/man/lme.html">lme</a></span>(<span class="no">Reaction</span> ~ <span class="no">Days</span>, <span class="kw">random</span> <span class="kw">=</span> ~ <span class="fl">1</span> + <span class="no">Days</span> <span class="kw">|</span> <span class="no">Subject</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">sleepstudy</span>)

<span class="no">tmb_model</span>  <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/glmmTMB/man/glmmTMB.html">glmmTMB</a></span>(<span class="no">Reaction</span> ~ <span class="no">Days</span> + (<span class="fl">1</span> + <span class="no">Days</span> <span class="kw">|</span> <span class="no">Subject</span>), <span class="kw">data</span> <span class="kw">=</span> <span class="no">sleepstudy</span>)

<span class="co"># brms_model &lt;-</span>
<span class="co">#   brm(Reaction ~ Days + (1 + Days | Subject), </span>
<span class="co">#       data = sleepstudy,</span>
<span class="co">#       cores = 4,</span>
<span class="co">#       refresh = -1,</span>
<span class="co">#       verbose = FALSE</span>
<span class="co">#   )</span>

<span class="co"># this is akin to (1 | Subject) + (0 + Days | Subject) in lme4</span>
<span class="no">mgcv_model</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/gam.html">gam</a></span>(
    <span class="no">Reaction</span> ~  <span class="no">Days</span> +
      <span class="fu"><a href="https://rdrr.io/pkg/brms/man/s.html">s</a></span>(<span class="no">Subject</span>, <span class="kw">bs</span> <span class="kw">=</span> <span class="st">'re'</span>) +
      <span class="fu"><a href="https://rdrr.io/pkg/brms/man/s.html">s</a></span>(<span class="no">Days</span>, <span class="no">Subject</span>, <span class="kw">bs</span> <span class="kw">=</span> <span class="st">'re'</span>),
    <span class="kw">data</span> <span class="kw">=</span> <span class="kw pkg">lme4</span><span class="kw ns">::</span><span class="no"><a href="https://rdrr.io/pkg/lme4/man/sleepstudy.html">sleepstudy</a></span>,
    <span class="kw">method</span> <span class="kw">=</span> <span class="st">'REML'</span>
  )</pre></body></html></div>
<div class="sourceCode" id="cb2"><html><body><pre class="r">library(mixedup)

summarize_model(lmer_model)
Computing profile confidence intervals ...

Variance Components:
    Group    Effect Variance    SD SD_2.5 SD_97.5 Var_prop
  Subject Intercept   612.10 24.74  14.38   37.72     0.47
  Subject      Days    35.07  5.92   3.80    8.75     0.03
 Residual             654.94 25.59  22.90   28.86     0.50

Fixed Effects:
      Term  Value   SE     t P_value Lower_2.5 Upper_97.5
 Intercept 251.41 6.82 36.84    0.00    238.03     264.78
      Days  10.47 1.55  6.77    0.00      7.44      13.50


summarize_model(lme_model)

Variance Components:
    Group    Effect Variance    SD SD_2.5 SD_97.5 Var_prop
  Subject Intercept   612.08 24.74  15.52   39.44     0.47
  Subject      Days    35.07  5.92   3.90    8.98     0.03
 Residual             654.94 25.59  22.80   28.73     0.50

Fixed Effects:
      Term  Value   SE     Z P_value Lower_2.5 Upper_97.5
 Intercept 251.41 6.82 36.84    0.00    237.93     264.88
      Days  10.47 1.55  6.77    0.00      7.41      13.52


summarize_model(tmb_model)

Variance Components:
    Group    Effect Variance    SD SD_2.5 SD_97.5 Var_prop
  Subject Intercept   565.52 23.78  15.02   37.66     0.45
  Subject      Days    32.68  5.72   3.81    8.59     0.03
 Residual             654.94 25.59     NA      NA     0.52

Fixed Effects:
      Term  Value   SE     Z P_value Lower_2.5 Upper_97.5
 Intercept 251.41 6.63 37.91    0.00    238.41     264.40
      Days  10.47 1.50  6.97    0.00      7.52      13.41


summarize_model(brms_model)

Variance Components:
    Group    Effect Variance    SD SD_2.5 SD_97.5 Var_prop
  Subject Intercept   680.18 26.08  16.32   37.16     0.49
  Subject      Days    44.48  6.67   4.42   10.27     0.03
 Residual             669.60 25.88  23.52   28.96     0.48

Fixed Effects:
      Term  Value   SE Lower_2.5 Upper_97.5
 Intercept 252.38 6.74    237.55     265.23
      Days  10.31 1.70      7.14      13.37


summarize_model(mgcv_model)

Variance Components:
    Group    Effect Variance    SD SD_2.5 SD_97.5 Var_prop
  Subject Intercept   627.57 25.05  16.09   39.02     0.48
  Subject      Days    35.86  5.99   4.03    8.91     0.03
 Residual             653.58 25.57  22.79   28.68     0.50

Fixed Effects:
      Term  Value   SE     t P_value Lower_2.5 Upper_97.5
 Intercept 251.41 6.89 36.51    0.00    237.80     265.01
      Days  10.47 1.56  6.71    0.00      7.39      13.55</pre></body></html></div>
</div>
<div id="options" class="section level2">
<h2 class="hasAnchor">
<a href="#options" class="anchor"></a>Options</h2>
<div class="sourceCode" id="cb3"><html><body><pre class="r">summarize_model(
  lmer_model,
  ci = FALSE,
  cor_re = TRUE,
  cor_fe = TRUE,
  digits = 3
)

Variance Components:
    Group    Effect Variance     SD Var_prop
  Subject Intercept  612.100 24.741    0.470
  Subject      Days   35.072  5.922    0.027
 Residual            654.940 25.592    0.503

Correlation of Random Effects:
          Intercept  Days
Intercept     1.000 0.066
Days          0.066 1.000

Fixed Effects:
      Term   Value    SE      t P_value Lower_2.5 Upper_97.5
 Intercept 251.405 6.825 36.838   0.000   238.029    264.781
      Days  10.467 1.546  6.771   0.000     7.438     13.497

Correlation of Fixed Effects:
          Intercept   Days
Intercept     1.000 -0.138
Days         -0.138  1.000


summarise_model(lmer_model, ci = FALSE)

Variance Components:
    Group    Effect Variance    SD Var_prop
  Subject Intercept   612.10 24.74     0.47
  Subject      Days    35.07  5.92     0.03
 Residual             654.94 25.59     0.50

Fixed Effects:
      Term  Value   SE     t P_value Lower_2.5 Upper_97.5
 Intercept 251.41 6.82 36.84    0.00    238.03     264.78
      Days  10.47 1.55  6.77    0.00      7.44      13.50</pre></body></html></div>
</div>
<div id="get-convergence" class="section level2">
<h2 class="hasAnchor">
<a href="#get-convergence" class="anchor"></a>Get Convergence</h2>
<p>Often a model estimated by <span class="pack" style="">lme4</span> needs a bit of help for convergence. At present this function only works for <span class="pack" style="">lme4</span>, but then, that’s mostly where you’re going to have the problem. This function will start with your current model and run it long enough to the point that if you still have problems, you probably <em>really</em> have data or model issues, and not just an estimation problem. See <a href="https://m-clark.github.io/posts/2020-03-16-convergence/">this</a> for details.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r">lmer_not_converged &lt;- lmer(
  score ~ Machine + (1 + Machine | Worker),
  data = nlme::Machines
)

lmer_converged &lt;- converge_it(lmer_not_converged) # final result is a converged model

summarize_model(lmer_converged, ci = FALSE)

Variance Components:
    Group    Effect Variance   SD Var_prop
   Worker Intercept    16.64 4.08     0.25
   Worker  MachineB    34.55 5.88     0.53
   Worker  MachineC    13.62 3.69     0.21
 Residual               0.92 0.96     0.01

Fixed Effects:
      Term Value   SE     t P_value Lower_2.5 Upper_97.5
 Intercept 52.36 1.68 31.15    0.00     49.06      55.65
  MachineB  7.97 2.42  3.29    0.00      3.22      12.71
  MachineC 13.92 1.54  9.04    0.00     10.90      16.94</pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://m-clark.github.io"><img src="man/figures/mc_logo.png" width="10%" style="display:inline"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
